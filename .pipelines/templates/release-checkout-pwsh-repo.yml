steps:
  - pwsh: |
      Write-Verbose -Verbose "Deploy Box Product Pathway Does Not Support the `"checkout`" task"
      if ($ENV:BUILD_REASON -eq 'PullRequest') {
        throw 'We dont support PRs'
      }
      
      Write-Verbose -Verbose $ENV:BUILD_SOURCEBRANCH
      $branchParts = $ENV:BUILD_SOURCEBRANCH -replace '^refs/head/'
      $branchName = "$($branchParts[-2])/$($branchParts[-1])"
      Write-Verbose -Verbose "Branch Name: $branchName"
      git clone --depth 1 --branch $branchName https://$(mscodehubCodeReadPat)@mscodehub.visualstudio.com/PowerShellCore/_git/PowerShell '$(Pipeline.Workspace)/PowerShell'
      cd $(Pipeline.Workspace)/PowerShell
    displayName: Checkout Powershell Repository
